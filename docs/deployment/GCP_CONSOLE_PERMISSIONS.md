# GCPコンソールでCloud Runの権限を設定する方法（UIでの設定）

## 方法1: Cloud Runサービス詳細ページから

1. [GCPコンソール](https://console.cloud.google.com/)にアクセス
2. 左メニュー → 「**Cloud Run**」をクリック
3. サービス一覧から「**gym-reserve-app**」をクリック
4. サービス詳細ページの上部にある以下のいずれかを探してください：
   - 「**アクセス**」タブ
   - 「**IAM**」セクション
   - 「**アクセス制御**」
   - または、ページ上部の「**プリンシパルを追加**」ボタン（タブの下に表示される場合があります）

5. 「**プリンシパルを追加**」（または「**アクセスを許可**」）ボタンをクリック
6. 設定：
   - **プリンシパル**: `allUsers` と入力
   - **ロール**: 「**Cloud Run 起動元**」（`roles/run.invoker`）を選択
7. 「**保存**」をクリック

---

## 方法2: IAMと管理から設定

1. GCPコンソール → 左メニュー → 「**IAMと管理**」→「**IAM**」
2. 上部の「**プリンシパルを追加**」をクリック
3. 設定：
   - **新しいプリンシパル**: `allUsers`
   - **ロールを選択**: 「**Cloud Run 起動元**」を選択
   - **条件（オプション）**: 設定しない
4. 「**保存**」をクリック

ただし、この方法ではサービス全体に権限が付与される可能性があるため、方法1の方が推奨されます。

---

## 方法3: ワークフローで自動設定（推奨・簡単）

既にワークフローファイルに `--allow-unauthenticated` フラグを追加済みです。

以下のコマンドで変更をコミット・プッシュすると、次回のデプロイ時に自動的に設定されます：

```bash
git add .github/workflows/deploy.yml
git commit -m "fix: Cloud Runに未認証アクセスを許可"
git push
```

GitHub Actionsでデプロイが実行されると、自動的に未認証アクセスが許可されます。

---

## 確認方法

設定後、数秒待ってから以下のURLにアクセス：

https://gym-reserve-app-1094873497912.asia-northeast1.run.app/

正常にページが表示されれば成功です。


