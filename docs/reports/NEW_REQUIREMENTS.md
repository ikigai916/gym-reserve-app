# 新要件整理ドキュメント

## 想定ユーザー
- **トレーナー**: サービス提供者（整体、鍼灸、トレーニング指導など）
- **トレーニー**: サービス利用者（顧客）

## 主要機能

### 1. 予約機能（プランベース）
- **プランタイプ**:
  - 1ヶ月60分4回プラン
  - 1ヶ月90分4回プラン
  - 1ヶ月120分4回プラン
- プランに応じて予約可能回数が制限される
- プランの有効期限管理（1ヶ月単位）

### 2. メニュー機能（大カテゴリ）
- **大カテゴリ**:
  - トレーニング
  - 整体
  - 鍼灸
  - 温活
  - 坐禅
- 予約時にメニューを選択
- 各メニューに所要時間を設定可能

### 3. カルテ機能
- **目的**: 各セッションで何をしたかを記録
- **構造**:
  - **大カテゴリ**: メニューと同じ（トレーニング、整体、鍼灸、温活、坐禅）
  - **中カテゴリ**: 具体的な内容
    - 例：トレーニング → ベンチプレス60kg×4回
    - 例：鍼灸 → 美容鍼30分
- 予約時間中にカルテを記録
- カルテの履歴を確認できる

### 4. 決済機能
- **プラン購入時の決済**
  - プラン選択後の決済処理
  - 決済方法の選択（クレジットカード、銀行振込など）
  - 決済ステータス管理（未決済、決済済み、キャンセルなど）
  - 決済履歴の記録
- **決済完了後の処理**
  - プランの有効化
  - ユーザープランの自動登録
  - 決済完了通知

### 5. 管理機能
- 予約管理
- ユーザー管理（トレーニー）
- プラン管理
- メニュー管理
- カルテ閲覧・編集
- 決済管理（決済履歴、ステータス管理）
- 統計・レポート（将来的）

## 画面構成（想定）

### トレーニー向け
1. **ログイン/新規登録画面**
2. **予約一覧画面**（カレンダー表示）
3. **予約作成画面**（プラン選択、メニュー選択、日時選択）
4. **マイページ**（個人情報、プラン状況、残り回数）
5. **カルテ閲覧画面**（過去のセッション記録）

### トレーナー向け
1. **ログイン画面**（トレーナー専用）
2. **予約管理画面**（予約一覧、ステータス管理）
3. **カルテ記録画面**（セッション中の記録入力）
4. **顧客管理画面**（トレーニー一覧、プラン状況）
5. **メニュー管理画面**（メニュー設定）
6. **統計画面**（予約状況、売上など）

## データモデル（想定）

### User（ユーザー）
- id, name, email, phone, role (trainer/trainee), createdAt, updatedAt

### Plan（プラン）
- id, name, duration (60/90/120), sessions (4), price, description

### UserPlan（ユーザープラン）
- id, userId, planId, purchasedAt, expiresAt, remainingSessions, paymentStatus, paymentId

### Payment（決済）
- id, userId, planId, amount, paymentMethod, status (pending/completed/cancelled/failed), transactionId, createdAt, completedAt

### Menu（メニュー）
- id, category (大カテゴリ), name, duration, description

### Reservation（予約）
- id, userId, trainerId, menuId, date, timeSlot, status, createdAt, updatedAt

### Chart（カルテ）
- id, reservationId, category (大カテゴリ), subcategory (中カテゴリ), notes, createdBy (trainerId), createdAt

