# ジム予約管理システム - 仕様書

## 1. 概要

ジムの予約を管理する最小限のWebアプリケーション。ユーザーはジムの時間枠を予約し、自分の予約を確認・キャンセルできる。

## 2. 機能要件

### 2.1 予約一覧表示
- 予約可能な時間枠の一覧を表示
- 各時間枠に空き状況（予約可能/満席）を表示
- 自分の予約は区別して表示

### 2.2 予約作成
- 空いている時間枠を選択して予約
- ログイン済みユーザーは自動的に予約者として登録
- 未ログインの場合は、名前入力またはユーザー登録が必要
- 同じ時間枠に複数の予約は不可（1時間枠1名まで）

### 2.3 予約確認
- 自分の予約一覧を表示
- 予約日時、ステータスを確認

### 2.4 予約キャンセル
- 自分の予約をキャンセル可能
- キャンセル後はその時間枠が再び予約可能になる

### 2.5 マイページ（個人情報の修正）
- ユーザー情報の表示・編集が可能
- 登録情報：名前、メールアドレス、電話番号
- 情報を更新・保存できる
- 更新後は予約時の名前も自動的に更新される（既存予約は保持）
- ユーザーIDで識別するため、同じ名前の複数ユーザーでも問題なく動作

## 3. データモデル

### 3.1 予約 (Reservation)
- `id`: 予約ID（主キー）
- `userId`: ユーザーID（外部キー、User.idを参照）
- `name`: 予約者名（表示用、ユーザー情報から取得）
- `date`: 予約日（YYYY-MM-DD形式）
- `timeSlot`: 時間枠（例: "09:00-10:00"）
- `createdAt`: 作成日時
- `status`: ステータス（active/cancelled）

### 3.2 時間枠設定
- デフォルトの時間枠（例: 09:00-10:00, 10:00-11:00, ...）
- 営業時間内の1時間単位のスロット

### 3.3 ユーザー情報 (User)
- `id`: ユーザーID（主キー、一意の識別子）
- `name`: ユーザー名
- `email`: メールアドレス
- `phone`: 電話番号
- `createdAt`: 作成日時
- `updatedAt`: 更新日時
- 注：ユーザーIDでユーザーを一意に識別（複数人での同時使用を可能にする）
- 注：初回予約時にユーザー情報を作成、またはマイページで新規登録

## 4. UI要件

### 4.1 トップページ
- カレンダーまたは日付選択
- 選択した日付の予約可能な時間枠一覧
- 各時間枠に「予約する」ボタン（空きがある場合）

### 4.2 予約フォーム
- 名前入力フィールド
- 予約確認・キャンセルボタン

### 4.3 マイ予約ページ
- 自分の予約一覧
- 各予約にキャンセルボタン

### 4.4 マイページ
- 個人情報の表示
- 名前、メールアドレス、電話番号の編集フォーム
- 保存ボタンで情報を更新
- ユーザーIDによる識別（名前の重複があっても問題なし）

### 4.5 ユーザー識別
- ローカルストレージまたはセッションでユーザーIDを保持
- 初回アクセス時は新規ユーザーとして登録、またはユーザーIDを生成
- 同じブラウザでは同じユーザーIDを使用（複数人での同時使用を可能にする）

## 5. 技術要件

### 5.1 フロントエンド
- モダンなWeb技術（React/Vue等を想定）
- レスポンシブデザイン

### 5.2 バックエンド
- RESTful API
- データ永続化（データベースまたはファイル）

### 5.3 その他
- シンプルな実装を優先
- 認証は簡易的（ユーザーIDベースで管理、ローカルストレージで識別）
- 複数人での同時使用に対応（ユーザーIDによる一意の識別）

## 6. 制約事項

- 1時間枠に1名まで
- 過去の日付には予約不可
- 予約作成後は即座に反映
- ユーザー情報はユーザーIDで識別（複数人での同時使用に対応）
- ユーザーIDはローカルストレージで管理（同じブラウザでは同じユーザーとして認識）
- ユーザー情報を更新した場合、今後作成する予約には新しい名前が使用される
- 既存の予約の名前は変更されない（履歴の整合性を保持）
- 同じ名前のユーザーが複数いても、ユーザーIDにより正しく識別される

